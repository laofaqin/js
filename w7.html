<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.7 (457389)"/><meta name="author" content="43647262@qq.com"/><meta name="created" content="2019-05-05 09:12:59 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-05-22 03:38:58 +0000"/><title>w7-设计模式</title></head><body><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><blockquote style="border-left-width: 4px; border-left-style: solid; border-left-color: rgb(203, 203, 203); padding: 1px 23px; background-color: rgb(248, 248, 248); letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">设计模式的定义：在面向对象软件设计过程中针对特定问题的简洁而优雅的解决方案
</span></span></div></blockquote><div style="margin-top: 1em; margin-bottom: 1em;"/><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-family: -apple-system; font-size: 14px;">当然我们可以用一个通俗的说法：设计模式是解决某个特定场景下对某种问题的解决方案。因此，当我们遇到合适的场景时，我们可能会条件反射一样自然而然想到符合这种场景的设计模式。
</span></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-family: -apple-system; font-size: 14px;">比如，当系统中某个接口的结构已经无法满足我们现在的业务需求，但又不能改动这个接口，因为可能原来的系统很多功能都依赖于这个接口，改动接口会牵扯到太多文件。因此应对这种场景，我们可以很快地想到可以用适配器模式来解决这个问题。
</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">开发中，我们或多或少地接触了设计模式，但是很多时候不知道自己使用了哪种设计模式或者说该使用何种设计模式。</span></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">其实我们在平时的工作中没有必要特意去用什么样的设计模式，或者你在不经意间就已经用了设计模式当中的一种</span></span></div><div><br/></div><ul><li><div><span style="font-family: -apple-system; font-size: 14px;">单例模式</span></div></li></ul><div><font face="-apple-system" style="font-size: 14px;"><span style="--inversion-type-color:  simple; font-family: -apple-system; font-size: 14px; color: rgb(204, 204, 204);"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/Snip20190505_3.png" height="882" width="1674"/></span><span style="font-family: -apple-system; font-size: 14px; color: white;-en-paragraph:true;">  </span><span style="font-family: -apple-system; font-size: 14px; color: white;-en-paragraph:true;">设计</span><span style="font-family: -apple-system; font-size: 14px; color: white;-en-paragraph:true;">一个函数，</span></font></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><span style="background-color: rgb(248, 248, 248); color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">单例模式的定义：保证一个类仅有一个实例，并提供一个访问它的全局访问点。实现的方法为先判断实例存在与否，如果存在则直接返回，如果不存在就创建了再返回，这就确保了一个类只有一个实例对象。</span></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 248, 248);"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);-en-paragraph:true;"><span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">适用场景：一个单一对象。比如：弹窗，无论点击多少次，弹窗只应该被创建一次。
</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><a href="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/00-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html">00-单例模式.html</a></font></div><div><font face="-apple-system" style="font-size: 14px;"><span style="font-family: -apple-system; font-size: 14px; color: white;-en-paragraph:true;">创建一</span><span style="font-family: -apple-system; font-size: 14px; color: white;-en-paragraph:true;">开和关闭。</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;">        class CreateUser {</font></div><div><font face="-apple-system" style="font-size: 14px;">            static shareInstance(){</font></div><div><font face="-apple-system" style="font-size: 14px;">                if(!CreateUser.ins){</font></div><div><font face="-apple-system" style="font-size: 14px;">                    CreateUser.ins = new CreateUser('aa')</font></div><div><font face="-apple-system" style="font-size: 14px;">                }</font></div><div><font face="-apple-system" style="font-size: 14px;">                return CreateUser.ins;</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">            constructor(name) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                this.name = name;</font></div><div><font face="-apple-system" style="font-size: 14px;">                this.getName();</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">            getName() {</font></div><div><font face="-apple-system" style="font-size: 14px;">                return this.name;</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;">        let c1 = CreateUser.shareInstance()</font></div><div><font face="-apple-system" style="font-size: 14px;">        let c2 = CreateUser.shareInstance()</font></div><div><font face="-apple-system" style="font-size: 14px;">        console.log(c1==c2)</font></div></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><hr/><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><ul><li><div><span style="font-family: -apple-system; font-size: 14px;">组合模式</span></div></li></ul><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><ul style="box-sizing: border-box; padding-left: 2em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;"><div><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">组合模式在对象间形成</span><span style="box-sizing: border-box; background-color: rgba(27, 31, 35, 0.0470588); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">树形结构</span><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">;</span></div></li><li style="box-sizing: border-box;"><div><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">组合模式中基本对象和组合对象被</span><span style="box-sizing: border-box; background-color: rgba(27, 31, 35, 0.0470588); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">一致对待</span><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">;</span></div></li><li style="box-sizing: border-box;"><div><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">无须关心对象有多少层, 调用时只需在根部进行调用;</span></div></li></ul><div style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);-en-paragraph:true;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; background-color: rgb(255, 255, 255); font-family: -apple-system; font-size: 14px;">想象我们现在手上有个万能遥控器, 当我们回家, 按一下开关, 下列事情将被执行:
</span></span></div><div style="box-sizing: border-box; overflow-wrap: normal; background-color: rgb(246, 248, 250); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; overflow: auto; padding: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; background-color: transparent; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; border: 0px; white-space: pre; word-break: normal; overflow: visible; overflow-wrap: normal;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45; background-color: transparent; font-family: -apple-system; font-size: 14px;">1. 煮咖啡</span></span></div><div><span style="box-sizing: border-box; background-color: transparent; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; border: 0px; white-space: pre; word-break: normal; overflow: visible; overflow-wrap: normal;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45; background-color: transparent; font-family: -apple-system; font-size: 14px;">2. 打开电视、打开音响</span></span></div><div><span style="box-sizing: border-box; background-color: transparent; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; border: 0px; white-space: pre; word-break: normal; overflow: visible; overflow-wrap: normal;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.45; background-color: transparent; font-family: -apple-system; font-size: 14px;">3. 打开空调、打开电脑</span></span></div></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);-en-paragraph:true;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; background-color: rgb(255, 255, 255); font-family: -apple-system; font-size: 14px;">我们把任务划分为 3 类, 效果图如下:
</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/7E40D480-BF8D-418E-B540-4543E72B7124.jpg" height="400" width="700"/><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><a href="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/00-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F.html">00-组合模式.html</a></font></div><div><span style="font-family: -apple-system; font-size: 14px;">命令（任务）类</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;">const MacroCommand = function() {</font></div><div><font face="-apple-system" style="font-size: 14px;">  return {</font></div><div><font face="-apple-system" style="font-size: 14px;">    lists: [],</font></div><div><font face="-apple-system" style="font-size: 14px;">    add: function(task) {</font></div><div><font face="-apple-system" style="font-size: 14px;">      this.lists.push(task)</font></div><div><font face="-apple-system" style="font-size: 14px;">    },</font></div><div><font face="-apple-system" style="font-size: 14px;">    excute: function() { // ①: 组合对象调用这里的 excute,</font></div><div><font face="-apple-system" style="font-size: 14px;">      for (let i = 0; i &lt; this.lists.length; i++) {</font></div><div><font face="-apple-system" style="font-size: 14px;">        this.lists[i].excute()</font></div><div><font face="-apple-system" style="font-size: 14px;">      }</font></div><div><font face="-apple-system" style="font-size: 14px;">    },</font></div><div><font face="-apple-system" style="font-size: 14px;">  }</font></div><div><font face="-apple-system" style="font-size: 14px;">}</font></div></div><hr/><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">const command1 = MacroCommand() // 命令1</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">command1.add({</font></div><div><font face="-apple-system" style="font-size: 14px;">  excute: () =&gt; console.log('煮咖啡') // </font></div><div><font face="-apple-system" style="font-size: 14px;">})</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">const command2 = MacroCommand() // 命令2</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">command2.add({</font></div><div><font face="-apple-system" style="font-size: 14px;">  excute: () =&gt; console.log('打开电视')</font></div><div><font face="-apple-system" style="font-size: 14px;">})</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">command2.add({</font></div><div><font face="-apple-system" style="font-size: 14px;">  excute: () =&gt; console.log('打开音响')</font></div><div><font face="-apple-system" style="font-size: 14px;">})</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">const command3 = MacroCommand() //命令3</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">command3.add({</font></div><div><font face="-apple-system" style="font-size: 14px;">  excute: () =&gt; console.log('打开空调')</font></div><div><font face="-apple-system" style="font-size: 14px;">})</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">command3.add({</font></div><div><font face="-apple-system" style="font-size: 14px;">  excute: () =&gt; console.log('打开电脑')</font></div><div><font face="-apple-system" style="font-size: 14px;">})</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">const macroCommand = MacroCommand()//组合对象</font></div><div><font face="-apple-system" style="font-size: 14px;">macroCommand.add(command1)</font></div><div><font face="-apple-system" style="font-size: 14px;">macroCommand.add(command2)</font></div><div><font face="-apple-system" style="font-size: 14px;">macroCommand.add(command3)</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">macroCommand.excute()</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">// 煮咖啡</font></div><div><font face="-apple-system" style="font-size: 14px;">// 打开电视</font></div><div><font face="-apple-system" style="font-size: 14px;">// 打开音响</font></div><div><font face="-apple-system" style="font-size: 14px;">// 打开空调</font></div><div><font face="-apple-system" style="font-size: 14px;">// 打开电脑</font></div></div><div style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);-en-paragraph:true;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; background-color: rgb(255, 255, 255); font-family: -apple-system; font-size: 14px;">可以看出在组合模式中基本对象和组合对象被一致对待, 所以要保证基本对象(叶对象)和组合对象具有一致方法。
</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><hr/><ul><li><div><span style="font-family: -apple-system; font-size: 14px;">观察者模式</span></div></li></ul><div><span style="font-family: -apple-system; font-size: 14px;">Observer模式也叫观察者模式、订阅/发布模式，是由GoF提出的23种软件设计模式的一种。</span></div><div><span style="font-family: -apple-system; font-size: 14px;">Observer模式是行为模式之一，它的作用是当一个对象的状态发生变化时，能够自动通知其他关联对象，自动刷新对象状态，或者说执行对应对象的方法。</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-family: -apple-system; font-size: 14px;">这种设计模式可以大大降低程序模块之间的耦合度，便于更加灵活的扩展和维护。
</span></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-family: -apple-system; font-size: 14px;">观察者模式包含两种角色：
</span></span></div><ul><li><div><span style="font-family: -apple-system; font-size: 14px;">观察者（订阅者）</span></div></li><li><div><span style="font-family: -apple-system; font-size: 14px;">被观察者（发布者）</span></div></li></ul><div style="margin-top: 1em; margin-bottom: 1em;"><font face="-apple-system" style="font-size: 14px;"><span style="font-family: -apple-system; font-size: 14px;-en-paragraph:true;">核心思想：</span><span style="font-family: -apple-system; font-size: 14px; font-weight: bold;-en-paragraph:true;">观察者只要订阅了被观察者的事件，那么当被观察者的状态改变时，被观察者会主动去通知观察者，而无需关心观察者得到事件后要去做什么，实际程序中可能是执行订阅者的回调函数。</span><span style="font-family: -apple-system; font-size: 14px;-en-paragraph:true;"
/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"/><div><span style="font-weight: bold; font-family: -apple-system; font-size: 14px;">简单的例子：</span></div><div><span style="font-weight: bold; font-family: -apple-system; font-size: 14px;">假设你是一个班长，要去通知班里的某些人一些事情，与其一个一个的手动调用触发的方法（私下里一个一个通知），不如维护一个列表（建一个群），这个列表存有你想要调用的对象方法（想要通知的人）；</span></div><div><span style="font-weight: bold; font-family: -apple-system; font-size: 14px;">之后每次通知事件的时候只要循环执行这个列表就好了（群发），而不用关心这个列表里有谁。
</span></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-family: -apple-system; font-size: 14px;">Javascript中实现一个例子：
</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;">// 我们向某dom文档订阅了点击事件，当点击发生时，他会执行我们传入的callback</font></div><div><font face="-apple-system" style="font-size: 14px;">element.addEventListener(‘click’, callback2, false)</font></div><div><font face="-apple-system" style="font-size: 14px;">element.addEventListener(‘click’, callback2, false)</font></div></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><ol style="box-sizing: border-box; padding-left: 2em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><div><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">场景、当观察的数据对象发生变化时, 自动调用相应函数。比如 vue 的双向绑定;</span></div><div><font face="-apple-system" style="font-size: 14px;"><a href="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/00-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html">00-观察者模式.html</a></font></div><div><br/></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;">        var obj = {</font></div><div><font face="-apple-system" style="font-size: 14px;">            data: {</font></div><div><font face="-apple-system" style="font-size: 14px;">                list: []</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">            },</font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        // defineProperty 可以观察 obj对象 的list 属性的使用</font></div><div><font face="-apple-system" style="font-size: 14px;">        Object.defineProperty(obj, 'list', {</font></div><div><font face="-apple-system" style="font-size: 14px;">            get() {</font></div><div><font face="-apple-system" style="font-size: 14px;">                console.log('获取了list 属性')</font></div><div><font face="-apple-system" style="font-size: 14px;">                console.log(this.data['list'])</font></div><div><font face="-apple-system" style="font-size: 14px;">                return this.data['list']</font></div><div><font face="-apple-system" style="font-size: 14px;">            },</font></div><div><font face="-apple-system" style="font-size: 14px;">            set(val) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                console.log('值被更改了')</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">                this.data['list'] = val</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">        })</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        // 获取了list属性，那么get 方法就会被调用</font></div><div><font face="-apple-system" style="font-size: 14px;">        console.log(obj.list)</font></div><div><font face="-apple-system" style="font-size: 14px;">        // 设置了list属性set 方法就会被调用 </font></div><div><font face="-apple-system" style="font-size: 14px;">        obj.list = ['a', 'b']</font></div></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><hr/><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div><span style="background-color: yellow;"><span style="background-color: yellow; font-family: -apple-system; font-size: 14px;">工厂模式</span></span></div><div><span style="background-color: yellow;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><font face="-apple-system" style="font-size: 14px;"><div>工厂：可以批量生产产品的地方</div><div><br/></div><div>工厂模式类似于现实生活中的工厂可以产生大量相似的商品，去做同样的事情，实现同样的效果;这时候需要使用工厂模式。</div><div><br/></div><div>js中构造函数 都是工厂</div><div><br/></div></font></div></span></div><div><font face="-apple-system" style="font-size: 14px;"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/Snip20190505_8.png" height="676" width="1306"/><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/Snip20190505_9.png" height="516" width="1088"/><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><a href="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/00-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.html">00-工厂模式.html</a></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;"> // 文本工厂</font></div><div><font face="-apple-system" style="font-size: 14px;">        class Text {</font></div><div><font face="-apple-system" style="font-size: 14px;">            constructor(text) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                this.text = text</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">            insert(where) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                const txt = document.createTextNode(this.text)</font></div><div><font face="-apple-system" style="font-size: 14px;">                where.appendChild(txt)</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        // 链接工厂</font></div><div><font face="-apple-system" style="font-size: 14px;">        class Link {</font></div><div><font face="-apple-system" style="font-size: 14px;">            constructor(url) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                this.url = url</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">            insert(where) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                const link = document.createElement('a')</font></div><div><font face="-apple-system" style="font-size: 14px;">                link.href = this.url</font></div><div><font face="-apple-system" style="font-size: 14px;">                link.appendChild(document.createTextNode(this.url))</font></div><div><font face="-apple-system" style="font-size: 14px;">                where.appendChild(link)</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div></div></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><span style="background-color: rgb(255, 255, 153); --inversion-type-background-color:  simple; font-family: -apple-system; font-size: 14px;">抽象工厂模式</span></font></div><div><span style="font-family: -apple-system; font-size: 14px;">     抽象工厂模式：流程==》 先设计一个抽象类，这个类不能被实例化，</span></div><div><span style="font-family: -apple-system; font-size: 14px;">       只能用来派生子类，最后通过对子类的扩展实现工厂方法</span></div><div><span style="background-color: yellow;"><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></span></div><div><span style="background-color: yellow;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><font face="-apple-system" style="font-size: 14px;"><div>        </div><div><br/></div><div>        // DOM工厂</div><div>        class DomFactory {</div><div><br/></div><div>            constructor() {</div><div><br/></div><div>            }</div><div><br/></div><div>            // 各流水线</div><div>            insert() {</div><div><br/></div><div>            }</div><div><br/></div><div><br/></div><div>        }</div><div>        // 链接工厂</div><div>        class Link2 extends DomFactory {</div><div>            constructor(url) {</div><div>                this.url = url</div><div>            }</div><div>            insert(where) {</div><div>                const link = document.createElement('a')</div><div>                link.href = this.url</div><div>                link.appendChild(document.createTextNode(this.url))</div><div>                where.appendChild(link)</div><div>            }</div><div>        }</div><div><br/></div></font></div></span></div><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><hr/><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div><span style="background-color: yellow;"><span style="background-color: yellow; font-family: -apple-system; font-size: 14px;">策略模式</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><blockquote style="border-left-width: 4px; border-left-style: solid; border-left-color: rgb(203, 203, 203); padding: 1px 23px; background-color: rgb(248, 248, 248); letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="color: rgb(102, 102, 102); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">策略模式的定义：定义一系列的算法，把他们一个个封装起来，并且使他们可以相互替换。
</span></span></div></blockquote><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-family: -apple-system; font-size: 14px;">策略模式的目的就是将算法的使用算法的实现分离开来。
</span></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"><span style="font-family: -apple-system; font-size: 14px;">一个基于策略模式的程序至少由两部分组成。第一个部分是一组策略类（可变），策略类封装了具体的算法，并负责具体的计算过程。第二个部分是环境类Context（不变），Context接受客户的请求，随后将请求委托给某一个策略类。要做到这一点，说明Context中要维持对某个策略对象的引用。
</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><a href="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/00-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.html">00-策略模式.html</a></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;">        /*策略类*/</font></div><div><font face="-apple-system" style="font-size: 14px;">        var levelOBJ = {</font></div><div><font face="-apple-system" style="font-size: 14px;">            "A": function (money) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                return money * 4;</font></div><div><font face="-apple-system" style="font-size: 14px;">            },</font></div><div><font face="-apple-system" style="font-size: 14px;">            "B": function (money) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                return money * 3;</font></div><div><font face="-apple-system" style="font-size: 14px;">            },</font></div><div><font face="-apple-system" style="font-size: 14px;">            "C": function (money) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                return money * 2;</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">        };</font></div><div><font face="-apple-system" style="font-size: 14px;">        /*环境类*/</font></div><div><font face="-apple-system" style="font-size: 14px;">        var calculateBouns = function (level, money) {</font></div><div><font face="-apple-system" style="font-size: 14px;">            return levelOBJ[level](money);</font></div><div><font face="-apple-system" style="font-size: 14px;">        };</font></div><div><font face="-apple-system" style="font-size: 14px;">        console.log(calculateBouns('A', 10000)); // 40000</font></div></div><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><hr/><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div><span style="background-color: yellow;"><span style="background-color: yellow; font-family: -apple-system; font-size: 14px;">代理模式</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/Snip20190505_20.png" height="944" width="2058"/><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/Snip20190505_21.png" height="932" width="1980"/><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><span style="font-family: -apple-system; font-size: 14px;">js 中有事件委托 就是典型的代理模式</span></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);-en-paragraph:true;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; background-color: rgb(255, 255, 255); font-family: -apple-system; font-size: 14px;">情景: 小明追女生 A
</span></span></div><ul style="box-sizing: border-box; padding-left: 2em; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;"><div><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">非代理模式: 小明 =花=&gt; 女生A</span></div></li><li style="box-sizing: border-box;"><div><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">代理模式: 小明 =花=&gt; 让女生A的好友B帮忙 =花=&gt; 女生A</span></div></li></ul><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; max-width: 1012px; padding-left: 16px !important; padding-right: 16px !important;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; background-color: rgb(255, 255, 255); border: 1px solid rgb(209, 213, 218); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;"><div style="box-sizing: border-box; border-bottom: 1px solid rgb(225, 228, 232); padding: 16px; border-bottom-left-radius: 2px; border-bottom-right-radius: 2px;"><div style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1em;"><span style="box-sizing: border-box;-en-paragraph:true;"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; font-family: -apple-system; font-size: 14px;">在开发时候不要先去猜测是否需要使用代理模式, 如果发现直接使用某个对象不方便时, 再来优化不迟。
</span></span></div></div></div></div></div></div></div><div style="box-sizing: border-box; max-width: 1012px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; padding-left: 16px !important; padding-right: 16px !important;"><div style="box-sizing: border-box; border-color: rgb(234, 236, 239); border-top-width: 1px !important; border-top-style: solid !important; flex-flow: row nowrap !important; justify-content: space-between !important; padding-bottom: 8px !important; padding-top: 40px !important;"><div style="box-sizing: border-box; flex-wrap: wrap !important; justify-content: space-between !important; list-style: none !important; padding-left: 0px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(36, 41, 46); font-variant-caps: normal; font-variant-ligatures: normal; background-color: rgb(255, 255, 255); font-family: -apple-system; font-size: 14px;">下面这段代码运用代理模式来实现图片预加载, 可以看到通过代理模式巧妙地将创建图片与预加载逻辑分离, 并且在未来如果不需要预加载, 只要改成请求本体代替请求代理对象就行。</span></span></div><div style="box-sizing: border-box; flex-wrap: wrap !important; justify-content: space-between !important; list-style: none !important; padding-left: 0px;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><div style="box-sizing: border-box; flex-wrap: wrap !important; justify-content: space-between !important; list-style: none !important; padding-left: 0px;"><font face="-apple-system" style="font-size: 14px;"><a href="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/00-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.html">00-代理模式.html</a></font></div></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;">     const MyImage = function (parent) {</font></div><div><font face="-apple-system" style="font-size: 14px;">            const imgNode = document.createElement('img')</font></div><div><font face="-apple-system" style="font-size: 14px;">            parent.appendChild(imgNode)</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">            // 提供一个方法 ,让外部也能修改 图片的src属性</font></div><div><font face="-apple-system" style="font-size: 14px;">            this.setSrc = function(src){</font></div><div><font face="-apple-system" style="font-size: 14px;">                imgNode.src = src</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">            </font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;">        // 直接添加图片 ，如果图片比较大，可能加载的比较慢，导致网页上的img一开始显示不出来</font></div><div><font face="-apple-system" style="font-size: 14px;">        let myImage   = new MyImage(document.body)</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">// 写个代理   提供 预加载功能</font></div><div><font face="-apple-system" style="font-size: 14px;">        const ProxyImage = function (myImage) {</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">            // 创建image对象</font></div><div><font face="-apple-system" style="font-size: 14px;">            const img = new Image()</font></div><div><font face="-apple-system" style="font-size: 14px;">            img.on</font></div><div><font face="-apple-system" style="font-size: 14px;">            // 监听img对象的 onload 方法</font></div><div><font face="-apple-system" style="font-size: 14px;">            img.onload = function () { // http 图片加载完毕后才会执行</font></div><div><font face="-apple-system" style="font-size: 14px;">                // 模拟网络很慢的情况</font></div><div><font face="-apple-system" style="font-size: 14px;">                setTimeout(()=&gt;{</font></div><div><font face="-apple-system" style="font-size: 14px;">                    myImage.setSrc(this.src)</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">                },2000)</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">            </font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">            this.setSrc =function (src) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                    // 加载时候先不加载大图，先加载一张小图（浏览器已经下载过的）</font></div><div><font face="-apple-system" style="font-size: 14px;">                    myImage.setSrc('loading.gif') // 本地 loading 图片</font></div><div><font face="-apple-system" style="font-size: 14px;">                    img.src = src</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;">        // </font></div><div><font face="-apple-system" style="font-size: 14px;">        let proxyImage = new ProxyImage(myImage)</font></div><div><font face="-apple-system" style="font-size: 14px;">        proxyImage.setSrc('https://www.baidu.com/img/bd_logo1.png?where=super')</font></div></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; max-width: 1012px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; padding-left: 16px !important; padding-right: 16px !important;"><div style="box-sizing: border-box; border-color: rgb(234, 236, 239); border-top-width: 1px !important; border-top-style: solid !important; flex-flow: row nowrap !important; justify-content: space-between !important; padding-bottom: 8px !important; padding-top: 40px !important;"><div style="box-sizing: border-box; flex-wrap: wrap !important; justify-content: space-between !important; list-style: none !important; padding-left: 0px;"><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div style="box-sizing: border-box; flex-wrap: wrap !important; justify-content: space-between !important; list-style: none !important; padding-left: 0px;"><font face="-apple-system" style="font-size: 14px;"><br/></font></div></div></div><div><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></div><hr/><div><span style="background-color: yellow;"><span style="background-color: yellow; font-family: -apple-system; font-size: 14px;">适配器模式</span></span></div><div><font face="-apple-system" style="font-size: 14px;"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/Snip20190505_24.png" height="880" width="1692"/><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><img src="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/Snip20190505_25.png" height="848" width="1598"/><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><span style="orphans: 2; widows: 2; --inversion-type-color:  simple; font-family: -apple-system; font-size: 14px; color: rgb(5, 6, 6); font-weight: bold;">适配者模式: 主要用于解决两个接口之间不匹配的问题。</span></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><a href="w7-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html.resources/00-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F.html">00-适配器模式.html</a></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><font face="-apple-system" style="font-size: 14px;">        // 老接口</font></div><div><font face="-apple-system" style="font-size: 14px;">        const zhejiangCityOld = function () {</font></div><div><font face="-apple-system" style="font-size: 14px;">            return [{</font></div><div><font face="-apple-system" style="font-size: 14px;">                    name: 'hangzhou',</font></div><div><font face="-apple-system" style="font-size: 14px;">                    id: 11,</font></div><div><font face="-apple-system" style="font-size: 14px;">                },</font></div><div><font face="-apple-system" style="font-size: 14px;">                {</font></div><div><font face="-apple-system" style="font-size: 14px;">                    name: 'jinhua',</font></div><div><font face="-apple-system" style="font-size: 14px;">                    id: 12</font></div><div><font face="-apple-system" style="font-size: 14px;">                }</font></div><div><font face="-apple-system" style="font-size: 14px;">            ]</font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        console.log(zhejiangCityOld())</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        // 新接口希望是下面形式</font></div><div><font face="-apple-system" style="font-size: 14px;">        // {</font></div><div><font face="-apple-system" style="font-size: 14px;">        //     hangzhou: 11,</font></div><div><font face="-apple-system" style="font-size: 14px;">        //     jinhua:12</font></div><div><font face="-apple-system" style="font-size: 14px;">        // }</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        // 这时候就可采用适配者模式</font></div><div><font face="-apple-system" style="font-size: 14px;">        const adaptor = function (oldCity) {</font></div><div><font face="-apple-system" style="font-size: 14px;">            console.log(oldCity)</font></div><div><font face="-apple-system" style="font-size: 14px;">            const obj = {}</font></div><div><font face="-apple-system" style="font-size: 14px;">            for (let city of oldCity) {</font></div><div><font face="-apple-system" style="font-size: 14px;">                obj[city.name] = city.id</font></div><div><font face="-apple-system" style="font-size: 14px;">            }</font></div><div><font face="-apple-system" style="font-size: 14px;">            return obj</font></div><div><font face="-apple-system" style="font-size: 14px;">        }</font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;">        let oldData = zhejiangCityOld();</font></div><div><font face="-apple-system" style="font-size: 14px;">        //把老数据放在适配器中产生新数据</font></div><div><font face="-apple-system" style="font-size: 14px;">        console.log(adaptor(oldData))</font></div></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><font face="-apple-system" style="font-size: 14px;"><br/></font></div><div><span style="background-color: yellow;"><span style="background-color: yellow;"><font face="-apple-system" style="font-size: 14px;"><br/></font></span></span></div><div><br/></div><h3 style="padding-bottom: 0px; font-size: 18px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><br/></h3><div style="margin-top: 1em; margin-bottom: 1em;"/><div style="margin-top: 1em; margin-bottom: 1em;"/><div style="margin-top: 1em; margin-bottom: 1em;"/></body></html>